{"remainingRequest":"D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\src\\views\\Video.vue?vue&type=style&index=0&id=ba2db59e&lang=less&scoped=true&","dependencies":[{"path":"D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\src\\views\\Video.vue","mtime":1600412515902},{"path":"D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouZGV0YWlsIHsNCiAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgdG9wOiAwOw0KICAgIGJvdHRvbTogMDsNCiAgICBsZWZ0OiAwOw0KICAgIHJpZ2h0OiAwOw0KICAgIGhlaWdodDogMTAwdmg7DQogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgIzAwMDAwMCAwJSwjOTk5OTk5IDEwMCUpOw0KICAgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7DQogICAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyOw0KICAgIHotaW5kZXg6IDI7DQogICAgY29sb3I6ICNGRkY7DQogICAgb3ZlcmZsb3cteTogYXV0bzsNCg0KICAgIC5iYWNrIHsNCiAgICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgICB6LWluZGV4OiAzOw0KICAgICAgICBtYXJnaW46IDZweDsNCiAgICAgICAgcGFkZGluZzogNnB4Ow0KICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuNyk7DQogICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsNCiAgICB9DQogICAgdmlkZW8gew0KICAgICAgICB3aWR0aDogMTAwJTsNCiAgICB9DQogICAgLmNvbnRlbnQgew0KICAgICAgICBwYWRkaW5nOiAwIDE2cHg7DQoNCiAgICAgICAgcCB7DQogICAgICAgICAgICBtYXJnaW46IDZweCAwOw0KICAgICAgICB9DQogICAgICAgIC5kZXRhaWwtdGl0bGUgew0KICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICB9DQogICAgICAgIC5kZXRhaWwtYXV0aG9yLW5hbWUgew0KICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4Ow0KICAgICAgICAgICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44KTsNCiAgICAgICAgfQ0KICAgICAgICAuZGV0YWlsLWRlc2NyaXB0aW9uIHsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDsNCiAgICAgICAgICAgIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCk7DQogICAgICAgIH0NCiAgICAgICAgLmRldGFpbC1vcGVyYXRpb24gew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBwYWRkaW5nOiAxMnB4IDA7DQoNCiAgICAgICAgICAgIC5vcGVyYXRpb24taXRlbSB7DQogICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KDQogICAgICAgICAgICAgICAgLmNvdW50IHsNCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZy1sZWZ0OiAzcHg7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgL2RlZXAvIC5tb21lbnQgew0KICAgICAgICAudGV4dC1jYXJkIHsNCiAgICAgICAgICAgIC52YW4tY2VsbC0tbGFyZ2Ugew0KICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsIDApOw0KICAgICAgICAgICAgICAgIGNvbG9yOiAjRkZGOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIC5pdGVtLXRhZyB7DQogICAgICAgICAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpICFpbXBvcnRhbnQ7DQogICAgICAgIH0NCiAgICAgICAgLmR5bmFtaWMtaW5mby1jYXJkIHsNCiAgICAgICAgICAgIC5uYW1lIHsNCiAgICAgICAgICAgICAgICBjb2xvcjogI0ZGRiAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLm1lc3NhZ2Ugew0KICAgICAgICAgICAgICAgIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQp9DQo="},{"version":3,"sources":["Video.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Video.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n<div class=\"detail\">\r\n  <template v-if=\"detail\">\r\n    <van-sticky>\r\n      <van-icon name=\"arrow-left\" class=\"back\" @click=\"back\" />\r\n      <video :id=\"detail.data.id\" controls preload=\"none\" :poster=\"detail.data.cover.feed\" :src=\"detail.data.playUrl\">\r\n      </video>\r\n    </van-sticky>\r\n    <div class=\"content\">\r\n      <p class=\"detail-title\">{{detail.data.title}}</p>\r\n      <p class=\"detail-author-name\">{{detail.data.author != null ? detail.data.author.name : (detail.data.owner ? detail.data.owner.nickname : '') + ' / #' + detail.data.category}}</p>\r\n      <p class=\"detail-description\">{{detail.data.description}}</p>\r\n      <div class=\"detail-operation\">\r\n        <div class=\"operation-item\">\r\n          <van-icon name=\"like\" />\r\n          <span class=\"count\">{{detail.data.consumption.collectionCount}}</span>\r\n        </div>\r\n        <div class=\"operation-item\" @click=\"shareUrl(detail)\">\r\n          <van-icon name=\"share\" />\r\n          <span class=\"count\">{{detail.data.consumption.shareCount}}</span>\r\n        </div>\r\n        <div class=\"operation-item\" @click=\"download(detail)\">\r\n          <van-icon name=\"down\" />\r\n          <span class=\"count\">下载</span>\r\n        </div>\r\n        <div class=\"operation-item\">\r\n          <van-icon name=\"star\" />\r\n          <span class=\"count\">{{detail.data.consumption.realCollectionCount}}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <moment :list=\"relatedList\" />\r\n    <moment :list=\"replies\" />\r\n  </template>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport { getUrl } from '../utils/common.js';\r\nimport { Toast } from 'vant';\r\nimport moment from '../components/Moment.vue';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      detail: null,\r\n      relatedList: [],\r\n      replies: []\r\n    }\r\n  },\r\n  components: {\r\n    moment\r\n  },\r\n  methods: {\r\n    init() {\r\n      const detail = localStorage.getItem('detail');\r\n      if (detail) {\r\n        this.detail = JSON.parse(detail);\r\n        this.getRelated();\r\n        this.getReplies();\r\n      }\r\n    },\r\n    back() {\r\n      this.$router.push(\"/\");\r\n    },\r\n    shareUrl(content) {\r\n      this.$copyText(content.data.playUrl).then(e => {\r\n        Toast.success('已复制');\r\n      }, e => {\r\n        Toast.fail('复制异常');\r\n      })\r\n    },\r\n    download(content) {\r\n      window.open(content.data.playUrl, '_blank');\r\n    },\r\n    getRelated() {\r\n      this.$get(getUrl('/api/v4/video/related?id=' + this.detail.data.id), { hideLoading: true }).then(data => {\r\n        this.relatedList = data.itemList;\r\n      });\r\n    },\r\n    getReplies() {\r\n      this.$get(getUrl('/api/v2/replies/video?videoId=' + this.detail.data.id), { hideLoading: true }).then(data => {\r\n        this.replies = data.itemList;\r\n      });\r\n    },\r\n  },\r\n  watch: {\r\n    '$route'(to, from) {\r\n      this.init();\r\n    }\r\n  },\r\n  mounted() {\r\n    // 使用路由参数时，组件的生命周期钩子不会再被调用\r\n    // https://router.vuejs.org/zh/guide/essentials/dynamic-matching.html#%E5%93%8D%E5%BA%94%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0%E7%9A%84%E5%8F%98%E5%8C%96\r\n    this.init();\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.detail {\r\n    position: fixed;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    height: 100vh;\r\n    background: linear-gradient(to bottom, #000000 0%,#999999 100%);\r\n    background-size: cover;\r\n    background-position: center;\r\n    z-index: 2;\r\n    color: #FFF;\r\n    overflow-y: auto;\r\n\r\n    .back {\r\n        position: absolute;\r\n        z-index: 3;\r\n        margin: 6px;\r\n        padding: 6px;\r\n        background: rgba(0, 0, 0, 0.7);\r\n        border-radius: 50%;\r\n    }\r\n    video {\r\n        width: 100%;\r\n    }\r\n    .content {\r\n        padding: 0 16px;\r\n\r\n        p {\r\n            margin: 6px 0;\r\n        }\r\n        .detail-title {\r\n            font-size: 14px;\r\n        }\r\n        .detail-author-name {\r\n            font-size: 10px;\r\n            color: rgba(255, 255, 255, 0.8);\r\n        }\r\n        .detail-description {\r\n            font-size: 10px;\r\n            color: rgba(255, 255, 255, 0.8);\r\n        }\r\n        .detail-operation {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            padding: 12px 0;\r\n\r\n            .operation-item {\r\n                display: flex;\r\n                align-items: center;\r\n\r\n                .count {\r\n                    padding-left: 3px;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /deep/ .moment {\r\n        .text-card {\r\n            .van-cell--large {\r\n                background: rgba(0,0,0, 0);\r\n                color: #FFF;\r\n            }\r\n        }\r\n        .item-tag {\r\n            color: rgba(255, 255, 255, 0.8) !important;\r\n        }\r\n        .dynamic-info-card {\r\n            .name {\r\n                color: #FFF !important;\r\n            }\r\n            .message {\r\n                color: rgba(255, 255, 255, 0.8);\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>\r\n"]}]}