{"remainingRequest":"D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\src\\views\\Video.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\src\\views\\Video.vue","mtime":1600412515902},{"path":"D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBnZXRVcmwgfSBmcm9tICcuLi91dGlscy9jb21tb24uanMnOw0KaW1wb3J0IHsgVG9hc3QgfSBmcm9tICd2YW50JzsNCmltcG9ydCBtb21lbnQgZnJvbSAnLi4vY29tcG9uZW50cy9Nb21lbnQudnVlJzsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBkZXRhaWw6IG51bGwsDQogICAgICByZWxhdGVkTGlzdDogW10sDQogICAgICByZXBsaWVzOiBbXQ0KICAgIH0NCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIG1vbWVudA0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaW5pdCgpIHsNCiAgICAgIGNvbnN0IGRldGFpbCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkZXRhaWwnKTsNCiAgICAgIGlmIChkZXRhaWwpIHsNCiAgICAgICAgdGhpcy5kZXRhaWwgPSBKU09OLnBhcnNlKGRldGFpbCk7DQogICAgICAgIHRoaXMuZ2V0UmVsYXRlZCgpOw0KICAgICAgICB0aGlzLmdldFJlcGxpZXMoKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGJhY2soKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiLyIpOw0KICAgIH0sDQogICAgc2hhcmVVcmwoY29udGVudCkgew0KICAgICAgdGhpcy4kY29weVRleHQoY29udGVudC5kYXRhLnBsYXlVcmwpLnRoZW4oZSA9PiB7DQogICAgICAgIFRvYXN0LnN1Y2Nlc3MoJ+W3suWkjeWIticpOw0KICAgICAgfSwgZSA9PiB7DQogICAgICAgIFRvYXN0LmZhaWwoJ+WkjeWItuW8guW4uCcpOw0KICAgICAgfSkNCiAgICB9LA0KICAgIGRvd25sb2FkKGNvbnRlbnQpIHsNCiAgICAgIHdpbmRvdy5vcGVuKGNvbnRlbnQuZGF0YS5wbGF5VXJsLCAnX2JsYW5rJyk7DQogICAgfSwNCiAgICBnZXRSZWxhdGVkKCkgew0KICAgICAgdGhpcy4kZ2V0KGdldFVybCgnL2FwaS92NC92aWRlby9yZWxhdGVkP2lkPScgKyB0aGlzLmRldGFpbC5kYXRhLmlkKSwgeyBoaWRlTG9hZGluZzogdHJ1ZSB9KS50aGVuKGRhdGEgPT4gew0KICAgICAgICB0aGlzLnJlbGF0ZWRMaXN0ID0gZGF0YS5pdGVtTGlzdDsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgZ2V0UmVwbGllcygpIHsNCiAgICAgIHRoaXMuJGdldChnZXRVcmwoJy9hcGkvdjIvcmVwbGllcy92aWRlbz92aWRlb0lkPScgKyB0aGlzLmRldGFpbC5kYXRhLmlkKSwgeyBoaWRlTG9hZGluZzogdHJ1ZSB9KS50aGVuKGRhdGEgPT4gew0KICAgICAgICB0aGlzLnJlcGxpZXMgPSBkYXRhLml0ZW1MaXN0Ow0KICAgICAgfSk7DQogICAgfSwNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICAnJHJvdXRlJyh0bywgZnJvbSkgew0KICAgICAgdGhpcy5pbml0KCk7DQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIC8vIOS9v+eUqOi3r+eUseWPguaVsOaXtu+8jOe7hOS7tueahOeUn+WRveWRqOacn+mSqeWtkOS4jeS8muWGjeiiq+iwg+eUqA0KICAgIC8vIGh0dHBzOi8vcm91dGVyLnZ1ZWpzLm9yZy96aC9ndWlkZS9lc3NlbnRpYWxzL2R5bmFtaWMtbWF0Y2hpbmcuaHRtbCMlRTUlOTMlOEQlRTUlQkElOTQlRTglQjclQUYlRTclOTQlQjElRTUlOEYlODIlRTYlOTUlQjAlRTclOUElODQlRTUlOEYlOTglRTUlOEMlOTYNCiAgICB0aGlzLmluaXQoKTsNCiAgfQ0KfQ0K"},{"version":3,"sources":["Video.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Video.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n<div class=\"detail\">\r\n  <template v-if=\"detail\">\r\n    <van-sticky>\r\n      <van-icon name=\"arrow-left\" class=\"back\" @click=\"back\" />\r\n      <video :id=\"detail.data.id\" controls preload=\"none\" :poster=\"detail.data.cover.feed\" :src=\"detail.data.playUrl\">\r\n      </video>\r\n    </van-sticky>\r\n    <div class=\"content\">\r\n      <p class=\"detail-title\">{{detail.data.title}}</p>\r\n      <p class=\"detail-author-name\">{{detail.data.author != null ? detail.data.author.name : (detail.data.owner ? detail.data.owner.nickname : '') + ' / #' + detail.data.category}}</p>\r\n      <p class=\"detail-description\">{{detail.data.description}}</p>\r\n      <div class=\"detail-operation\">\r\n        <div class=\"operation-item\">\r\n          <van-icon name=\"like\" />\r\n          <span class=\"count\">{{detail.data.consumption.collectionCount}}</span>\r\n        </div>\r\n        <div class=\"operation-item\" @click=\"shareUrl(detail)\">\r\n          <van-icon name=\"share\" />\r\n          <span class=\"count\">{{detail.data.consumption.shareCount}}</span>\r\n        </div>\r\n        <div class=\"operation-item\" @click=\"download(detail)\">\r\n          <van-icon name=\"down\" />\r\n          <span class=\"count\">下载</span>\r\n        </div>\r\n        <div class=\"operation-item\">\r\n          <van-icon name=\"star\" />\r\n          <span class=\"count\">{{detail.data.consumption.realCollectionCount}}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <moment :list=\"relatedList\" />\r\n    <moment :list=\"replies\" />\r\n  </template>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport { getUrl } from '../utils/common.js';\r\nimport { Toast } from 'vant';\r\nimport moment from '../components/Moment.vue';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      detail: null,\r\n      relatedList: [],\r\n      replies: []\r\n    }\r\n  },\r\n  components: {\r\n    moment\r\n  },\r\n  methods: {\r\n    init() {\r\n      const detail = localStorage.getItem('detail');\r\n      if (detail) {\r\n        this.detail = JSON.parse(detail);\r\n        this.getRelated();\r\n        this.getReplies();\r\n      }\r\n    },\r\n    back() {\r\n      this.$router.push(\"/\");\r\n    },\r\n    shareUrl(content) {\r\n      this.$copyText(content.data.playUrl).then(e => {\r\n        Toast.success('已复制');\r\n      }, e => {\r\n        Toast.fail('复制异常');\r\n      })\r\n    },\r\n    download(content) {\r\n      window.open(content.data.playUrl, '_blank');\r\n    },\r\n    getRelated() {\r\n      this.$get(getUrl('/api/v4/video/related?id=' + this.detail.data.id), { hideLoading: true }).then(data => {\r\n        this.relatedList = data.itemList;\r\n      });\r\n    },\r\n    getReplies() {\r\n      this.$get(getUrl('/api/v2/replies/video?videoId=' + this.detail.data.id), { hideLoading: true }).then(data => {\r\n        this.replies = data.itemList;\r\n      });\r\n    },\r\n  },\r\n  watch: {\r\n    '$route'(to, from) {\r\n      this.init();\r\n    }\r\n  },\r\n  mounted() {\r\n    // 使用路由参数时，组件的生命周期钩子不会再被调用\r\n    // https://router.vuejs.org/zh/guide/essentials/dynamic-matching.html#%E5%93%8D%E5%BA%94%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0%E7%9A%84%E5%8F%98%E5%8C%96\r\n    this.init();\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.detail {\r\n    position: fixed;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    height: 100vh;\r\n    background: linear-gradient(to bottom, #000000 0%,#999999 100%);\r\n    background-size: cover;\r\n    background-position: center;\r\n    z-index: 2;\r\n    color: #FFF;\r\n    overflow-y: auto;\r\n\r\n    .back {\r\n        position: absolute;\r\n        z-index: 3;\r\n        margin: 6px;\r\n        padding: 6px;\r\n        background: rgba(0, 0, 0, 0.7);\r\n        border-radius: 50%;\r\n    }\r\n    video {\r\n        width: 100%;\r\n    }\r\n    .content {\r\n        padding: 0 16px;\r\n\r\n        p {\r\n            margin: 6px 0;\r\n        }\r\n        .detail-title {\r\n            font-size: 14px;\r\n        }\r\n        .detail-author-name {\r\n            font-size: 10px;\r\n            color: rgba(255, 255, 255, 0.8);\r\n        }\r\n        .detail-description {\r\n            font-size: 10px;\r\n            color: rgba(255, 255, 255, 0.8);\r\n        }\r\n        .detail-operation {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            padding: 12px 0;\r\n\r\n            .operation-item {\r\n                display: flex;\r\n                align-items: center;\r\n\r\n                .count {\r\n                    padding-left: 3px;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /deep/ .moment {\r\n        .text-card {\r\n            .van-cell--large {\r\n                background: rgba(0,0,0, 0);\r\n                color: #FFF;\r\n            }\r\n        }\r\n        .item-tag {\r\n            color: rgba(255, 255, 255, 0.8) !important;\r\n        }\r\n        .dynamic-info-card {\r\n            .name {\r\n                color: #FFF !important;\r\n            }\r\n            .message {\r\n                color: rgba(255, 255, 255, 0.8);\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>\r\n"]}]}