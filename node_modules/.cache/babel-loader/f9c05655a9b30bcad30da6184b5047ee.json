{"remainingRequest":"D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\node_modules\\babel-loader\\lib\\index.js!D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\src\\utils\\http.js","dependencies":[{"path":"D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\src\\utils\\http.js","mtime":1600412515888},{"path":"D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi4vcm91dGVyJzsKaW1wb3J0IHsgVG9hc3QgfSBmcm9tICd2YW50JzsKYXhpb3MuZGVmYXVsdHMudGltZW91dCA9IDUwMDA7CmF4aW9zLmRlZmF1bHRzLmJhc2VVUkwgPSAnJzsgLy9odHRwIHJlcXVlc3Qg5oum5oiq5ZmoCgpheGlvcy5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIGlmICghY29uZmlnLnBhcmFtcy5oaWRlTG9hZGluZykgewogICAgVG9hc3QubG9hZGluZyh7CiAgICAgIG1lc3NhZ2U6ICfliqDovb3kuK0uLi4nLAogICAgICBmb3JiaWRDbGljazogdHJ1ZSwKICAgICAgZHVyYXRpb246IDAKICAgIH0pOwogIH0KCiAgY29uZmlnLmhlYWRlcnMgPSB7CiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgfTsKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTsKfSk7IC8vaHR0cCByZXNwb25zZSDmi6bmiKrlmagKCmF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgVG9hc3QuY2xlYXIoKTsKICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgcmV0dXJuIGRhdGE7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIFRvYXN0LmNsZWFyKCk7CiAgdmFyIHN0YXR1cyA9IGVycm9yLnJlc3BvbnNlLnN0YXR1czsKCiAgaWYgKHN0YXR1cyA9PSA0MDEpIHsKICAgIHZhciBjdXJyZW50ID0gcm91dGVyLmN1cnJlbnRSb3V0ZS5mdWxsUGF0aDsKCiAgICBpZiAoY3VycmVudCAhPSAnL2xvZ2luJykgewogICAgICByb3V0ZXIucHVzaCgiL2xvZ2luP3JlZGlyZWN0PSIuY29uY2F0KGN1cnJlbnQpKTsKICAgIH0KICB9IGVsc2UgaWYgKHN0YXR1cyA9PSA1MDApIHsKICAgIFRvYXN0LmZhaWwoJ+acjeWKoeWZqOW8guW4uCcpOwogIH0gZWxzZSBpZiAoc3RhdHVzICE9IDIwMCkgewogICAgVG9hc3QuZmFpbCgn6K+35qOA5p+l6K+35rGC5piv5ZCm5q2j56GuJyk7CiAgfQoKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKLyoqDQogKiDlsIHoo4VnZXTmlrnms5UNCiAqIEBwYXJhbSB1cmwNCiAqIEBwYXJhbSBkYXRhDQogKiBAcmV0dXJucyB7UHJvbWlzZX0NCiAqLwoKZXhwb3J0IGZ1bmN0aW9uIGdldCh1cmwpIHsKICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgYXhpb3MuZ2V0KHVybCwgewogICAgICBwYXJhbXM6IHBhcmFtcwogICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgIHJlamVjdChlcnIpOwogICAgfSk7CiAgfSk7Cn0KLyoqDQogKiDlsIHoo4Vwb3N06K+35rGCDQogKiBAcGFyYW0gdXJsDQogKiBAcGFyYW0gZGF0YQ0KICogQHJldHVybnMge1Byb21pc2V9DQogKi8KCmV4cG9ydCBmdW5jdGlvbiBwb3N0KHVybCkgewogIHZhciBkYXRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgYXhpb3MucG9zdCh1cmwsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgfSwgZnVuY3Rpb24gKGVycikgewogICAgICByZWplY3QoZXJyKTsKICAgIH0pOwogIH0pOwp9"},{"version":3,"sources":["D:/vscode-work/offline/vue/eyepetizer_vue/src/utils/http.js"],"names":["axios","router","Toast","defaults","timeout","baseURL","interceptors","request","use","config","params","hideLoading","loading","message","forbidClick","duration","headers","error","Promise","reject","err","response","clear","data","status","current","currentRoute","fullPath","push","fail","get","url","resolve","then","catch","post"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,SACEC,KADF,QAEO,MAFP;AAIAF,KAAK,CAACG,QAAN,CAAeC,OAAf,GAAyB,IAAzB;AACAJ,KAAK,CAACG,QAAN,CAAeE,OAAf,GAAyB,EAAzB,C,CAEA;;AACAL,KAAK,CAACM,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CACE,UAAAC,MAAM,EAAI;AACR,MAAI,CAACA,MAAM,CAACC,MAAP,CAAcC,WAAnB,EAAgC;AAC9BT,IAAAA,KAAK,CAACU,OAAN,CAAc;AACZC,MAAAA,OAAO,EAAE,QADG;AAEZC,MAAAA,WAAW,EAAE,IAFD;AAGZC,MAAAA,QAAQ,EAAE;AAHE,KAAd;AAKD;;AACDN,EAAAA,MAAM,CAACO,OAAP,GAAiB;AACf,oBAAgB;AADD,GAAjB;AAGA,SAAOP,MAAP;AACD,CAbH,EAcE,UAAAQ,KAAK,EAAI;AACP,SAAOC,OAAO,CAACC,MAAR,CAAeC,GAAf,CAAP;AACD,CAhBH,E,CAmBA;;AACApB,KAAK,CAACM,YAAN,CAAmBe,QAAnB,CAA4Bb,GAA5B,CACE,UAAAa,QAAQ,EAAI;AACVnB,EAAAA,KAAK,CAACoB,KAAN;AACA,MAAMC,IAAI,GAAGF,QAAQ,CAACE,IAAtB;AACA,SAAOA,IAAP;AACD,CALH,EAME,UAAAN,KAAK,EAAI;AACPf,EAAAA,KAAK,CAACoB,KAAN;AACA,MAAME,MAAM,GAAGP,KAAK,CAACI,QAAN,CAAeG,MAA9B;;AACA,MAAIA,MAAM,IAAI,GAAd,EAAmB;AACjB,QAAMC,OAAO,GAAGxB,MAAM,CAACyB,YAAP,CAAoBC,QAApC;;AACA,QAAIF,OAAO,IAAI,QAAf,EAAyB;AACvBxB,MAAAA,MAAM,CAAC2B,IAAP,2BAA+BH,OAA/B;AACD;AACF,GALD,MAKO,IAAID,MAAM,IAAI,GAAd,EAAmB;AACxBtB,IAAAA,KAAK,CAAC2B,IAAN,CAAW,OAAX;AACD,GAFM,MAEA,IAAIL,MAAM,IAAI,GAAd,EAAmB;AACxBtB,IAAAA,KAAK,CAAC2B,IAAN,CAAW,WAAX;AACD;;AACD,SAAOX,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CApBH;AAuBA;;;;;;;AAOA,OAAO,SAASa,GAAT,CAAaC,GAAb,EAA+B;AAAA,MAAbrB,MAAa,uEAAJ,EAAI;AACpC,SAAO,IAAIQ,OAAJ,CAAY,UAACc,OAAD,EAAUb,MAAV,EAAqB;AACtCnB,IAAAA,KAAK,CAAC8B,GAAN,CAAUC,GAAV,EAAe;AACXrB,MAAAA,MAAM,EAAEA;AADG,KAAf,EAGGuB,IAHH,CAGQ,UAAAZ,QAAQ,EAAI;AAChBW,MAAAA,OAAO,CAACX,QAAD,CAAP;AACD,KALH,EAMGa,KANH,CAMS,UAAAd,GAAG,EAAI;AACZD,MAAAA,MAAM,CAACC,GAAD,CAAN;AACD,KARH;AASD,GAVM,CAAP;AAWD;AAGD;;;;;;;AAOA,OAAO,SAASe,IAAT,CAAcJ,GAAd,EAA8B;AAAA,MAAXR,IAAW,uEAAJ,EAAI;AACnC,SAAO,IAAIL,OAAJ,CAAY,UAACc,OAAD,EAAUb,MAAV,EAAqB;AACtCnB,IAAAA,KAAK,CAACmC,IAAN,CAAWJ,GAAX,EAAgBR,IAAhB,EACGU,IADH,CACQ,UAAAZ,QAAQ,EAAI;AAChBW,MAAAA,OAAO,CAACX,QAAD,CAAP;AACD,KAHH,EAGK,UAAAD,GAAG,EAAI;AACRD,MAAAA,MAAM,CAACC,GAAD,CAAN;AACD,KALH;AAMD,GAPM,CAAP;AAQD","sourcesContent":["import axios from 'axios';\r\nimport router from '../router'\r\nimport {\r\n  Toast\r\n} from 'vant';\r\n\r\naxios.defaults.timeout = 5000;\r\naxios.defaults.baseURL = '';\r\n\r\n//http request 拦截器\r\naxios.interceptors.request.use(\r\n  config => {\r\n    if (!config.params.hideLoading) {\r\n      Toast.loading({\r\n        message: '加载中...',\r\n        forbidClick: true,\r\n        duration: 0\r\n      });\r\n    }\r\n    config.headers = {\r\n      'Content-Type': 'application/json'\r\n    }\r\n    return config;\r\n  },\r\n  error => {\r\n    return Promise.reject(err);\r\n  }\r\n);\r\n\r\n//http response 拦截器\r\naxios.interceptors.response.use(\r\n  response => {\r\n    Toast.clear();\r\n    const data = response.data;\r\n    return data;\r\n  },\r\n  error => {\r\n    Toast.clear();\r\n    const status = error.response.status;\r\n    if (status == 401) {\r\n      const current = router.currentRoute.fullPath;\r\n      if (current != '/login') {\r\n        router.push(`/login?redirect=${current}`)\r\n      }\r\n    } else if (status == 500) {\r\n      Toast.fail('服务器异常');\r\n    } else if (status != 200) {\r\n      Toast.fail('请检查请求是否正确');\r\n    }\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n/**\r\n * 封装get方法\r\n * @param url\r\n * @param data\r\n * @returns {Promise}\r\n */\r\n\r\nexport function get(url, params = {}) {\r\n  return new Promise((resolve, reject) => {\r\n    axios.get(url, {\r\n        params: params\r\n      })\r\n      .then(response => {\r\n        resolve(response);\r\n      })\r\n      .catch(err => {\r\n        reject(err)\r\n      })\r\n  })\r\n}\r\n\r\n\r\n/**\r\n * 封装post请求\r\n * @param url\r\n * @param data\r\n * @returns {Promise}\r\n */\r\n\r\nexport function post(url, data = {}) {\r\n  return new Promise((resolve, reject) => {\r\n    axios.post(url, data)\r\n      .then(response => {\r\n        resolve(response);\r\n      }, err => {\r\n        reject(err)\r\n      })\r\n  })\r\n}\r\n"]}]}