{"remainingRequest":"D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\node_modules\\babel-loader\\lib\\index.js!D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\src\\views\\Video.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\src\\views\\Video.vue","mtime":1600412515902},{"path":"D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode-work\\offline\\vue\\eyepetizer_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0VXJsIH0gZnJvbSAnLi4vdXRpbHMvY29tbW9uLmpzJzsKaW1wb3J0IHsgVG9hc3QgfSBmcm9tICd2YW50JzsKaW1wb3J0IG1vbWVudCBmcm9tICcuLi9jb21wb25lbnRzL01vbWVudC52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRldGFpbDogbnVsbCwKICAgICAgcmVsYXRlZExpc3Q6IFtdLAogICAgICByZXBsaWVzOiBbXQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIG1vbWVudDogbW9tZW50CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkgewogICAgICB2YXIgZGV0YWlsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2RldGFpbCcpOwoKICAgICAgaWYgKGRldGFpbCkgewogICAgICAgIHRoaXMuZGV0YWlsID0gSlNPTi5wYXJzZShkZXRhaWwpOwogICAgICAgIHRoaXMuZ2V0UmVsYXRlZCgpOwogICAgICAgIHRoaXMuZ2V0UmVwbGllcygpOwogICAgICB9CiAgICB9LAogICAgYmFjazogZnVuY3Rpb24gYmFjaygpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi8iKTsKICAgIH0sCiAgICBzaGFyZVVybDogZnVuY3Rpb24gc2hhcmVVcmwoY29udGVudCkgewogICAgICB0aGlzLiRjb3B5VGV4dChjb250ZW50LmRhdGEucGxheVVybCkudGhlbihmdW5jdGlvbiAoZSkgewogICAgICAgIFRvYXN0LnN1Y2Nlc3MoJ+W3suWkjeWIticpOwogICAgICB9LCBmdW5jdGlvbiAoZSkgewogICAgICAgIFRvYXN0LmZhaWwoJ+WkjeWItuW8guW4uCcpOwogICAgICB9KTsKICAgIH0sCiAgICBkb3dubG9hZDogZnVuY3Rpb24gZG93bmxvYWQoY29udGVudCkgewogICAgICB3aW5kb3cub3Blbihjb250ZW50LmRhdGEucGxheVVybCwgJ19ibGFuaycpOwogICAgfSwKICAgIGdldFJlbGF0ZWQ6IGZ1bmN0aW9uIGdldFJlbGF0ZWQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRnZXQoZ2V0VXJsKCcvYXBpL3Y0L3ZpZGVvL3JlbGF0ZWQ/aWQ9JyArIHRoaXMuZGV0YWlsLmRhdGEuaWQpLCB7CiAgICAgICAgaGlkZUxvYWRpbmc6IHRydWUKICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIF90aGlzLnJlbGF0ZWRMaXN0ID0gZGF0YS5pdGVtTGlzdDsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0UmVwbGllczogZnVuY3Rpb24gZ2V0UmVwbGllcygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLiRnZXQoZ2V0VXJsKCcvYXBpL3YyL3JlcGxpZXMvdmlkZW8/dmlkZW9JZD0nICsgdGhpcy5kZXRhaWwuZGF0YS5pZCksIHsKICAgICAgICBoaWRlTG9hZGluZzogdHJ1ZQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgX3RoaXMyLnJlcGxpZXMgPSBkYXRhLml0ZW1MaXN0OwogICAgICB9KTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICAnJHJvdXRlJzogZnVuY3Rpb24gJHJvdXRlKHRvLCBmcm9tKSB7CiAgICAgIHRoaXMuaW5pdCgpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIC8vIOS9v+eUqOi3r+eUseWPguaVsOaXtu+8jOe7hOS7tueahOeUn+WRveWRqOacn+mSqeWtkOS4jeS8muWGjeiiq+iwg+eUqAogICAgLy8gaHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnL3poL2d1aWRlL2Vzc2VudGlhbHMvZHluYW1pYy1tYXRjaGluZy5odG1sIyVFNSU5MyU4RCVFNSVCQSU5NCVFOCVCNyVBRiVFNyU5NCVCMSVFNSU4RiU4MiVFNiU5NSVCMCVFNyU5QSU4NCVFNSU4RiU5OCVFNSU4QyU5NgogICAgdGhpcy5pbml0KCk7CiAgfQp9Ow=="},{"version":3,"sources":["Video.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA,SAAA,MAAA,QAAA,oBAAA;AACA,SAAA,KAAA,QAAA,MAAA;AACA,OAAA,MAAA,MAAA,0BAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,IADA;AAEA,MAAA,WAAA,EAAA,EAFA;AAGA,MAAA,OAAA,EAAA;AAHA,KAAA;AAKA,GAPA;AAQA,EAAA,UAAA,EAAA;AACA,IAAA,MAAA,EAAA;AADA,GARA;AAWA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,kBACA;AACA,UAAA,MAAA,GAAA,YAAA,CAAA,OAAA,CAAA,QAAA,CAAA;;AACA,UAAA,MAAA,EAAA;AACA,aAAA,MAAA,GAAA,IAAA,CAAA,KAAA,CAAA,MAAA,CAAA;AACA,aAAA,UAAA;AACA,aAAA,UAAA;AACA;AACA,KARA;AASA,IAAA,IATA,kBASA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,GAAA;AACA,KAXA;AAYA,IAAA,QAZA,oBAYA,OAZA,EAYA;AACA,WAAA,SAAA,CAAA,OAAA,CAAA,IAAA,CAAA,OAAA,EAAA,IAAA,CAAA,UAAA,CAAA,EAAA;AACA,QAAA,KAAA,CAAA,OAAA,CAAA,KAAA;AACA,OAFA,EAEA,UAAA,CAAA,EAAA;AACA,QAAA,KAAA,CAAA,IAAA,CAAA,MAAA;AACA,OAJA;AAKA,KAlBA;AAmBA,IAAA,QAnBA,oBAmBA,OAnBA,EAmBA;AACA,MAAA,MAAA,CAAA,IAAA,CAAA,OAAA,CAAA,IAAA,CAAA,OAAA,EAAA,QAAA;AACA,KArBA;AAsBA,IAAA,UAtBA,wBAsBA;AAAA;;AACA,WAAA,IAAA,CAAA,MAAA,CAAA,8BAAA,KAAA,MAAA,CAAA,IAAA,CAAA,EAAA,CAAA,EAAA;AAAA,QAAA,WAAA,EAAA;AAAA,OAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,KAAA,CAAA,WAAA,GAAA,IAAA,CAAA,QAAA;AACA,OAFA;AAGA,KA1BA;AA2BA,IAAA,UA3BA,wBA2BA;AAAA;;AACA,WAAA,IAAA,CAAA,MAAA,CAAA,mCAAA,KAAA,MAAA,CAAA,IAAA,CAAA,EAAA,CAAA,EAAA;AAAA,QAAA,WAAA,EAAA;AAAA,OAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,IAAA,CAAA,QAAA;AACA,OAFA;AAGA;AA/BA,GAXA;AA4CA,EAAA,KAAA,EAAA;AACA,YADA,kBACA,EADA,EACA,IADA,EACA;AACA,WAAA,IAAA;AACA;AAHA,GA5CA;AAiDA,EAAA,OAjDA,qBAiDA;AACA;AACA;AACA,SAAA,IAAA;AACA;AArDA,CAAA","sourcesContent":["<template>\r\n<div class=\"detail\">\r\n  <template v-if=\"detail\">\r\n    <van-sticky>\r\n      <van-icon name=\"arrow-left\" class=\"back\" @click=\"back\" />\r\n      <video :id=\"detail.data.id\" controls preload=\"none\" :poster=\"detail.data.cover.feed\" :src=\"detail.data.playUrl\">\r\n      </video>\r\n    </van-sticky>\r\n    <div class=\"content\">\r\n      <p class=\"detail-title\">{{detail.data.title}}</p>\r\n      <p class=\"detail-author-name\">{{detail.data.author != null ? detail.data.author.name : (detail.data.owner ? detail.data.owner.nickname : '') + ' / #' + detail.data.category}}</p>\r\n      <p class=\"detail-description\">{{detail.data.description}}</p>\r\n      <div class=\"detail-operation\">\r\n        <div class=\"operation-item\">\r\n          <van-icon name=\"like\" />\r\n          <span class=\"count\">{{detail.data.consumption.collectionCount}}</span>\r\n        </div>\r\n        <div class=\"operation-item\" @click=\"shareUrl(detail)\">\r\n          <van-icon name=\"share\" />\r\n          <span class=\"count\">{{detail.data.consumption.shareCount}}</span>\r\n        </div>\r\n        <div class=\"operation-item\" @click=\"download(detail)\">\r\n          <van-icon name=\"down\" />\r\n          <span class=\"count\">下载</span>\r\n        </div>\r\n        <div class=\"operation-item\">\r\n          <van-icon name=\"star\" />\r\n          <span class=\"count\">{{detail.data.consumption.realCollectionCount}}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <moment :list=\"relatedList\" />\r\n    <moment :list=\"replies\" />\r\n  </template>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport { getUrl } from '../utils/common.js';\r\nimport { Toast } from 'vant';\r\nimport moment from '../components/Moment.vue';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      detail: null,\r\n      relatedList: [],\r\n      replies: []\r\n    }\r\n  },\r\n  components: {\r\n    moment\r\n  },\r\n  methods: {\r\n    init() {\r\n      const detail = localStorage.getItem('detail');\r\n      if (detail) {\r\n        this.detail = JSON.parse(detail);\r\n        this.getRelated();\r\n        this.getReplies();\r\n      }\r\n    },\r\n    back() {\r\n      this.$router.push(\"/\");\r\n    },\r\n    shareUrl(content) {\r\n      this.$copyText(content.data.playUrl).then(e => {\r\n        Toast.success('已复制');\r\n      }, e => {\r\n        Toast.fail('复制异常');\r\n      })\r\n    },\r\n    download(content) {\r\n      window.open(content.data.playUrl, '_blank');\r\n    },\r\n    getRelated() {\r\n      this.$get(getUrl('/api/v4/video/related?id=' + this.detail.data.id), { hideLoading: true }).then(data => {\r\n        this.relatedList = data.itemList;\r\n      });\r\n    },\r\n    getReplies() {\r\n      this.$get(getUrl('/api/v2/replies/video?videoId=' + this.detail.data.id), { hideLoading: true }).then(data => {\r\n        this.replies = data.itemList;\r\n      });\r\n    },\r\n  },\r\n  watch: {\r\n    '$route'(to, from) {\r\n      this.init();\r\n    }\r\n  },\r\n  mounted() {\r\n    // 使用路由参数时，组件的生命周期钩子不会再被调用\r\n    // https://router.vuejs.org/zh/guide/essentials/dynamic-matching.html#%E5%93%8D%E5%BA%94%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0%E7%9A%84%E5%8F%98%E5%8C%96\r\n    this.init();\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.detail {\r\n    position: fixed;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    height: 100vh;\r\n    background: linear-gradient(to bottom, #000000 0%,#999999 100%);\r\n    background-size: cover;\r\n    background-position: center;\r\n    z-index: 2;\r\n    color: #FFF;\r\n    overflow-y: auto;\r\n\r\n    .back {\r\n        position: absolute;\r\n        z-index: 3;\r\n        margin: 6px;\r\n        padding: 6px;\r\n        background: rgba(0, 0, 0, 0.7);\r\n        border-radius: 50%;\r\n    }\r\n    video {\r\n        width: 100%;\r\n    }\r\n    .content {\r\n        padding: 0 16px;\r\n\r\n        p {\r\n            margin: 6px 0;\r\n        }\r\n        .detail-title {\r\n            font-size: 14px;\r\n        }\r\n        .detail-author-name {\r\n            font-size: 10px;\r\n            color: rgba(255, 255, 255, 0.8);\r\n        }\r\n        .detail-description {\r\n            font-size: 10px;\r\n            color: rgba(255, 255, 255, 0.8);\r\n        }\r\n        .detail-operation {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            padding: 12px 0;\r\n\r\n            .operation-item {\r\n                display: flex;\r\n                align-items: center;\r\n\r\n                .count {\r\n                    padding-left: 3px;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /deep/ .moment {\r\n        .text-card {\r\n            .van-cell--large {\r\n                background: rgba(0,0,0, 0);\r\n                color: #FFF;\r\n            }\r\n        }\r\n        .item-tag {\r\n            color: rgba(255, 255, 255, 0.8) !important;\r\n        }\r\n        .dynamic-info-card {\r\n            .name {\r\n                color: #FFF !important;\r\n            }\r\n            .message {\r\n                color: rgba(255, 255, 255, 0.8);\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views"}]}